<!DOCTYPE html>

<meta charset="utf-8" />

<title>Win32Forth</title>

<script language="javascript" type="text/javascript">
var lastlen=0;
function doit()
{
  var dsp=document.getElementById('dsp');
  var txt=dsp.value;
  var ntxt=txt.substring(lastlen-1);
  if( ntxt[ntxt.length-1] != '\n')
      ntxt+='\n';
  fetch('',{method: 'post',body:ntxt,headers: {
    'Content-Type': 'text/plain'
     }
  })
  .then(response => response.text())
  .then(function(data) {
     var dtxt=dsp.value;
     if( data[data.length-1] == '\n')
        dtxt=dtxt.slice(0,dtxt.length-1);
     dtxt+='  ';
     dtxt+=data;
     lastlen=dtxt.length;
     dsp.value=dtxt;
     dsp.scrollTop=dsp.scrollHeight;
  })
  .catch(error => console.log('error is', error));

}
</script>
<body>
Web32Forth 3.00 by Robert Ackerman & John Peters 415-239-5393 TEXT is best 24/7<br>
You can DL the system on to your own machine. The source is on GitHub under JohnAlanPeters/CG<br>
The (Contract Generator tm) has preloaded data for electricians to build estimates.<br>
WEBBLY HOURS.<br>
We tend to work on it 8-9 AM and 6-9 PM M-F and odd times on weekends, Pacific Coast time.<br>
If you crash, it restarts after 3 minutes of inactivity.<br>
<br>
ELECTRIC WORDS shows a list of electrical parts names after a short delay.<br>
WORDS takes 45 seconds to display 2,846 words because,<br>
The output is buffered, so it looks like nothing is happining and then bang.<br>
The browser HTML code buffers the output so it can send it all at one time.<br>
We may have to recode it to send each single line of output immediatly.<br>
<br>
All the Forth words work just like on the hard disk based system. <br>
THANKS to Robert for herculean thinking & coding to get the local server screen to start reporting.<br>
<br>
 &#58 TEST 8 0 do &#46&#34 Hi World &#34 cr loop &#59<br>
Forth programmers can try .LOADED .DEFERRED .FILE .FONTS .FREE SEE (sub-string) and all the rest.<br>
<br>
The labor units are from NICA and the parts prices are from the National Price Service.<br>
Some are a litle out of date. Devide by 50 to get the cost per linear foot.<br>
50 EMT  1/2<br>
150 THHN #12<br>
TOTAL<br>
<textarea id='dsp' rows=56 cols=205 autofocus style="font-family:courier;font-size:18px;font-weight: bold;"></textarea>
</body>
</html>
<script>
const node = document.getElementById('dsp');
node.addEventListener("keyup", function(event) {
    if (event.key === "Enter") {
        doit();
    }
});
</script>

