<!DOCTYPE html>

<meta charset="utf-8" />

<title>test input</title>

<script language="javascript" type="text/javascript">
var lastlen=0;
function doit()
{
  var txt = document.getElementById('dsp').value;
  var ntxt=txt.substring(lastlen);
  ntxt=ntxt.replace('\n',' cr ');
  ntxt=ntxt.slice(0,-4)+' ';
  fetch('',{method: 'post',body:ntxt,headers: {
    'Content-Type': 'text/plain',
     )
  })
  .then(response => response.text())
  .then(data => document.getElementById('dsp').value=data)
  .catch(error => console.log('error is', error));
}

</script>
<body>
Web32Forth 1.03 <br>
Text John Peters at 415-239-5393 for tecnical help.<br>
The source code is on GitHub<br>
Forth is fast but Webbley is slow so far.<br>
Forth is going to run on the cloud<br>
We are looking for a permanent URL home<br>
Please enter your name. You will get an error -13 but we will see your name<br>
<textarea id='dsp' rows=56 cols=72></textarea>
</body>
</html> 
<script>
const node = document.getElementById('dsp');
node.addEventListener("keyup", function(event) {
    if (event.key === "Enter") {
        doit();
    }
});
</script>
