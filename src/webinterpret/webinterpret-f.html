<!DOCTYPE html>

<meta charset="utf-8" />

<title>Win32Forth</title>

<script language="javascript" type="text/javascript">
var lastlen=0;
function doit()
{
  var dsp=document.getElementById('dsp');
  var txt=dsp.value;
  var ntxt=txt.substring(lastlen-1);
  if( ntxt[ntxt.length-1] != '\n')
      ntxt+='\n';
  fetch('',{method: 'post',body:ntxt,headers: {
    'Content-Type': 'text/plain'
     }
  })
  .then(response => response.text())
  .then(function(data) {
     var dtxt=dsp.value;
     dtxt+=data;
     if( data[data.length-1] != '\n')
         dtxt+='\n';
     lastlen=dtxt.length;
     dsp.value=dtxt;
   })
  .catch(error => console.log('error is', error));
}

</script>
<body>
Web32Forth 2.00 by Robert Ackerman and<br>
John Alan Peters 415-239-5393 text only.<br>
We are on GitHub with the project name CG.<br>
The (Contract Generator tm) for electricians.<br>
WORDS still requires 2 CRs to make it perform.<br>
ELECTRIC WORDS takes about 5 seconds because it is<br>
ecohing to the local screen for development<br>
m m m m m (Man at work!)<br>
<textarea id='dsp' rows=56 cols=205 autofocus></textarea>
</body>
</html>
<script>
const node = document.getElementById('dsp');
node.addEventListener("keyup", function(event) {
    if (event.key === "Enter") {
        doit();
    }
});
</script>

